{"version":3,"sources":["../../../../../node_modules/caniuse-lite/dist/unpacker/feature.js"],"names":["statuses","require","supported","browsers","versions","browserVersions","MATH2LOG","Math","log","unpackSupport","cipher","stats","Object","keys","reduce","list","support","push","notes","notesArray","note","floor","unshift","pow","concat","join","unpackFeature","packed","unpacked","status","B","title","C","A","browserStats","key","browser","packedVersions","split","unpacked2","forEach","v","module","exports","default"],"mappings":"AAAA;;AAEA,IAAMA,WAAWC,QAAQ,iBAAR,CAAjB;AACA,IAAMC,YAAYD,QAAQ,kBAAR,CAAlB;AACA,IAAME,WAAWF,QAAQ,YAAR,EAAsBE,QAAvC;AACA,IAAMC,WAAWH,QAAQ,mBAAR,EAA6BI,eAA9C;;AAEA,IAAMC,WAAWC,KAAKC,GAAL,CAAS,CAAT,CAAjB;;AAEA,SAASC,aAAT,CAAuBC,MAAvB,EAA+B;AAC7B;AACA,MAAIC,QAAQC,OAAOC,IAAP,CAAYX,SAAZ,EAAuBY,MAAvB,CAA8B,UAACC,IAAD,EAAOC,OAAP,EAAmB;AAC3D,QAAIN,SAASR,UAAUc,OAAV,CAAb,EAAiCD,KAAKE,IAAL,CAAUD,OAAV;AACjC,WAAOD,IAAP;AACD,GAHW,EAGT,EAHS,CAAZ;;AAKA;AACA,MAAIG,QAAQR,UAAU,CAAtB;AACA,MAAIS,aAAa,EAAjB;AACA,SAAOD,KAAP,EAAc;AACZ,QAAIE,OAAOb,KAAKc,KAAL,CAAWd,KAAKC,GAAL,CAASU,KAAT,IAAkBZ,QAA7B,IAAyC,CAApD;AACAa,eAAWG,OAAX,OAAuBF,IAAvB;AACAF,aAASX,KAAKgB,GAAL,CAAS,CAAT,EAAYH,OAAO,CAAnB,CAAT;AACD;;AAED,SAAOT,MAAMa,MAAN,CAAaL,UAAb,EAAyBM,IAAzB,CAA8B,GAA9B,CAAP;AACD;;AAED,SAASC,aAAT,CAAuBC,MAAvB,EAA+B;AAC7B,MAAIC,WAAW,EAAEC,QAAQ7B,SAAS2B,OAAOG,CAAhB,CAAV,EAA8BC,OAAOJ,OAAOK,CAA5C,EAAf;AACAJ,WAASjB,KAAT,GAAiBC,OAAOC,IAAP,CAAYc,OAAOM,CAAnB,EAAsBnB,MAAtB,CAA6B,UAACoB,YAAD,EAAeC,GAAf,EAAuB;AACnE,QAAIC,UAAUT,OAAOM,CAAP,CAASE,GAAT,CAAd;AACAD,iBAAa/B,SAASgC,GAAT,CAAb,IAA8BvB,OAAOC,IAAP,CAAYuB,OAAZ,EAAqBtB,MAArB,CAC5B,UAACH,KAAD,EAAQK,OAAR,EAAoB;AAClB,UAAIqB,iBAAiBD,QAAQpB,OAAR,EAAiBsB,KAAjB,CAAuB,GAAvB,CAArB;AACA,UAAIC,YAAY9B,cAAcO,OAAd,CAAhB;AACAqB,qBAAeG,OAAf,CAAuB;AAAA,eAAM7B,MAAMP,SAASqC,CAAT,CAAN,IAAqBF,SAA3B;AAAA,OAAvB;AACA,aAAO5B,KAAP;AACD,KAN2B,EAO5B,EAP4B,CAA9B;AASA,WAAOuB,YAAP;AACD,GAZgB,EAYd,EAZc,CAAjB;AAaA,SAAON,QAAP;AACD;;AAEDc,OAAOC,OAAP,GAAiBjB,aAAjB;AACAgB,OAAOC,OAAP,CAAeC,OAAf,GAAyBlB,aAAzB","file":"feature.js","sourcesContent":["'use strict'\n\nconst statuses = require('../lib/statuses')\nconst supported = require('../lib/supported')\nconst browsers = require('./browsers').browsers\nconst versions = require('./browserVersions').browserVersions\n\nconst MATH2LOG = Math.log(2)\n\nfunction unpackSupport(cipher) {\n  // bit flags\n  let stats = Object.keys(supported).reduce((list, support) => {\n    if (cipher & supported[support]) list.push(support)\n    return list\n  }, [])\n\n  // notes\n  let notes = cipher >> 7\n  let notesArray = []\n  while (notes) {\n    let note = Math.floor(Math.log(notes) / MATH2LOG) + 1\n    notesArray.unshift(`#${note}`)\n    notes -= Math.pow(2, note - 1)\n  }\n\n  return stats.concat(notesArray).join(' ')\n}\n\nfunction unpackFeature(packed) {\n  let unpacked = { status: statuses[packed.B], title: packed.C }\n  unpacked.stats = Object.keys(packed.A).reduce((browserStats, key) => {\n    let browser = packed.A[key]\n    browserStats[browsers[key]] = Object.keys(browser).reduce(\n      (stats, support) => {\n        let packedVersions = browser[support].split(' ')\n        let unpacked2 = unpackSupport(support)\n        packedVersions.forEach(v => (stats[versions[v]] = unpacked2))\n        return stats\n      },\n      {}\n    )\n    return browserStats\n  }, {})\n  return unpacked\n}\n\nmodule.exports = unpackFeature\nmodule.exports.default = unpackFeature\n"]}